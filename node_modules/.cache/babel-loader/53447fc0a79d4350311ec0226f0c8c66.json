{"ast":null,"code":"import _defineProperty from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/victor/Documents/dadTools/emailFinder/src/App.js\";\nimport React from 'react';\nimport Address from './components/Address';\nimport WritingEmail from './views/writingEmail';\nimport Header from './Header';\nimport Home from './views/Home';\nimport { Switch, Route, Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport * as actions from './Actions/actions';\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    recipient: store.recipient,\n    emails: store.emails,\n    signedIn: store.signedIn\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    newRecip: function newRecip(data) {\n      return dispatch(actions.newRecip(data));\n    },\n    setEmails: function setEmails(data) {\n      return dispatch(actions.setEmails(data));\n    },\n    setAddress: function setAddress(data) {\n      return dispatch(actions.setAddress(data));\n    },\n    setUserInfo: function setUserInfo(data) {\n      return dispatch(actions.setUserInfo(data));\n    },\n    updateState: function updateState(data) {\n      return dispatch(actions.updateState(data));\n    }\n  };\n};\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleAuthClick =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var resp;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return window.gapi.auth2.getAuthInstance().signIn();\n\n              case 2:\n                resp = _context.sent;\n\n                _this.props.setUserInfo(resp.w3);\n\n                _this.props.updateState(['signedIn', true]);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleSignoutClick = function (event) {\n      window.gapi.auth2.getAuthInstance().signOut();\n\n      _this.props.updateState(['signedIn', false]);\n    };\n\n    _this.appendPre = function (message) {// var pre = document.getElementById('content');\n      // var textContent = document.createTextNode(message + '\\n');\n      // pre.appendChild(textContent);\n    };\n\n    _this.listLabels = function () {\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      window.gapi.client.gmail.users.labels.list({\n        'userId': 'me'\n      }).then(function (response) {\n        var labels = response.result.labels;\n        that.appendPre('Labels:');\n\n        if (labels && labels.length > 0) {\n          for (var i = 0; i < labels.length; i++) {\n            var label = labels[i];\n            that.appendPre(label.name);\n          }\n        } else {\n          that.appendPre('No Labels found.');\n        }\n      });\n    };\n\n    _this.selectAddress =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(i) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!_this.props.signedIn) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                _context2.next = 3;\n                return _this.handleAuthClick();\n\n              case 3:\n                _this.props.setAddress(_this.props.emails[i]);\n\n                _this.props.setEmails([]);\n\n                _this.props.history.push('/email');\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      selAdd: false,\n      emails: [],\n      CLIENT_ID: '605121789952-64i5u4ggvju6qhlmkrkv71ol78qbk5aa.apps.googleusercontent.com',\n      API_KEY: 'AIzaSyBkrt40jx5wx3PG4S5W9B49Vm02RNh4vt0',\n      DISCOVERY_DOCS: [\"https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest\"],\n      // Authorization scopes required by the API; multiple scopes can be\n      // included, separated by spaces.\n      SCOPES: 'https://www.googleapis.com/auth/gmail.readonly' + ' https://www.googleapis.com/auth/gmail.send'\n    };\n    _this.single = _this.single.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.initClient = _this.initClient.bind(_assertThisInitialized(_assertThisInitialized(_this))); // this.updateSigninStatus = this.updateSigninStatus.bind(this);\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"initClient\",\n    value: function () {\n      var _initClient = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var _this2 = this;\n\n        var s, that;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                s = this.state;\n                that = this;\n                _context4.next = 4;\n                return window.gapi.client.init({\n                  apiKey: s.API_KEY,\n                  clientId: s.CLIENT_ID,\n                  discoveryDocs: s.DISCOVERY_DOCS,\n                  scope: s.SCOPES\n                }).then(\n                /*#__PURE__*/\n                _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee3() {\n                  var resp;\n                  return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                      switch (_context3.prev = _context3.next) {\n                        case 0:\n                          // Listen for sign-in state changes.\n                          //window.gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n                          // Handle the initial sign-in state.\n                          // that.updateSigninStatus(window.gapi.auth2.getAuthInstance().isSignedIn.get());\n                          _this2.props.updateState([\"signedIn\", window.gapi.auth2.getAuthInstance().isSignedIn.get()]);\n\n                          if (!window.gapi.auth2.getAuthInstance().isSignedIn.get()) {\n                            _context3.next = 6;\n                            break;\n                          }\n\n                          _context3.next = 4;\n                          return window.gapi.auth2.getAuthInstance();\n\n                        case 4:\n                          resp = _context3.sent;\n\n                          _this2.props.setUserInfo(resp.currentUser.Ab.w3);\n\n                        case 6:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                  }, _callee3);\n                })), function (error) {\n                  console.log(error);\n                  this.appendPre(JSON.stringify(error, null, 2));\n                });\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function initClient() {\n        return _initClient.apply(this, arguments);\n      }\n\n      return initClient;\n    }() // updateSigninStatus(isSignedIn) {\n    //     var authorizeButton = document.getElementById('authorize_button');\n    //     var signoutButton = document.getElementById('signout_button');\n    //     if (isSignedIn) {\n    //       authorizeButton.style.display = 'none';\n    //       signoutButton.style.display = 'block';\n    //       this.listLabels();\n    //     } else {\n    //       authorizeButton.style.display = 'block';\n    //       signoutButton.style.display = 'none';\n    //     }\n    //   }\n\n    /**\n       *  Sign in the user upon button click.\n       */\n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.gapi.load('client:auth2', this.initClient);\n    }\n  }, {\n    key: \"single\",\n    value: function single(obj) {\n      var _this3 = this;\n\n      console.log(obj);\n      var forced = {\n        first: \"chris\",\n        last: \"lee\",\n        domain: \"bauerxcel.com\"\n      };\n      fetch(\"http://localhost:4000/single\", {\n        method: \"POST\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(obj)\n      }).then(function (data) {\n        console.log(data);\n        return data.json();\n      }).then(function (emails) {\n        var name = _objectSpread({}, obj);\n\n        _this3.props.setEmails(emails);\n\n        _this3.props.newRecip(name);\n\n        _this3.props.history.push('/find');\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(Header, {\n        handleSignoutClick: this.handleSignoutClick,\n        handleAuthClick: this.handleAuthClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/email\",\n        component: function component() {\n          var _React$createElement;\n\n          return React.createElement(WritingEmail, (_React$createElement = {\n            selectAddress: _this4.selectAddress,\n            single: _this4.single,\n            selAdd: _this4.state.selAdd\n          }, _defineProperty(_React$createElement, \"single\", _this4.single), _defineProperty(_React$createElement, \"emails\", _this4.state.emails), _defineProperty(_React$createElement, \"selectAddress\", _this4.selectAddress), _defineProperty(_React$createElement, \"name\", _this4.state.name), _defineProperty(_React$createElement, \"changeName\", _this4.changeName), _defineProperty(_React$createElement, \"__source\", {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/find\",\n        component: function component() {\n          return React.createElement(Address, {\n            single: _this4.single,\n            selectAddress: _this4.selectAddress,\n            selAdd: _this4.state.selAdd,\n            changeName: _this4.changeName,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/\",\n        component: function component() {\n          return React.createElement(Home, {\n            single: _this4.single,\n            emails: _this4.state.emails,\n            selectAddress: _this4.selectAddress,\n            selAdd: _this4.state.selAdd,\n            changeName: _this4.changeName,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App));","map":{"version":3,"sources":["/home/victor/Documents/dadTools/emailFinder/src/App.js"],"names":["React","Address","WritingEmail","Header","Home","Switch","Route","Redirect","withRouter","connect","actions","mapStateToProps","store","recipient","emails","signedIn","mapDispatchToProps","dispatch","newRecip","data","setEmails","setAddress","setUserInfo","updateState","App","props","handleAuthClick","event","window","gapi","auth2","getAuthInstance","signIn","resp","w3","handleSignoutClick","signOut","appendPre","message","listLabels","that","client","gmail","users","labels","list","then","response","result","length","i","label","name","selectAddress","history","push","state","selAdd","CLIENT_ID","API_KEY","DISCOVERY_DOCS","SCOPES","single","bind","initClient","s","init","apiKey","clientId","discoveryDocs","scope","isSignedIn","get","currentUser","Ab","error","console","log","JSON","stringify","load","obj","forced","first","last","domain","fetch","method","headers","body","json","changeName","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Address from './components/Address';\nimport WritingEmail from './views/writingEmail';\nimport Header from './Header';\nimport Home from './views/Home';\nimport { Switch, Route, Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport * as actions from './Actions/actions';\n\n\nconst mapStateToProps = store => ({\n  recipient: store.recipient,\n  emails: store.emails,\n  signedIn: store.signedIn\n});\n\nconst mapDispatchToProps = dispatch => ({\n  newRecip: data => dispatch(actions.newRecip(data)),\n  setEmails: data => dispatch(actions.setEmails(data)),\n  setAddress: data => dispatch(actions.setAddress(data)),\n  setUserInfo: data => dispatch(actions.setUserInfo(data)),\n  updateState: data => dispatch(actions.updateState(data))\n\n})\n\nclass App extends React.Component {\n    constructor(props){\n        super(props);\n\n        this.state = {\n            selAdd: false,\n            emails: [],\n            CLIENT_ID: '605121789952-64i5u4ggvju6qhlmkrkv71ol78qbk5aa.apps.googleusercontent.com',\n            API_KEY: 'AIzaSyBkrt40jx5wx3PG4S5W9B49Vm02RNh4vt0',\n            DISCOVERY_DOCS: [\"https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest\"],\n       \n            // Authorization scopes required by the API; multiple scopes can be\n            // included, separated by spaces.\n            SCOPES: 'https://www.googleapis.com/auth/gmail.readonly'+' https://www.googleapis.com/auth/gmail.send'\n\n        }\n        this.single = this.single.bind(this);\n        this.initClient = this.initClient.bind(this);\n        // this.updateSigninStatus = this.updateSigninStatus.bind(this);\n\n\n    }\n\n\n    async initClient() {\n        const s = this.state;\n        let that = this;\n        await window.gapi.client.init({\n          apiKey: s.API_KEY,\n          clientId: s.CLIENT_ID,\n          discoveryDocs: s.DISCOVERY_DOCS,\n          scope: s.SCOPES,\n        }).then(async () => {\n          // Listen for sign-in state changes.\n          //window.gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n\n          // Handle the initial sign-in state.\n          // that.updateSigninStatus(window.gapi.auth2.getAuthInstance().isSignedIn.get());\n          this.props.updateState([\"signedIn\", window.gapi.auth2.getAuthInstance().isSignedIn.get()])\n  \n\n          if(window.gapi.auth2.getAuthInstance().isSignedIn.get()){\n            let resp = await window.gapi.auth2.getAuthInstance();\n            this.props.setUserInfo(resp.currentUser.Ab.w3);\n          }\n\n\n        }, function(error) {\n            console.log(error);\n            this.appendPre(JSON.stringify(error, null, 2));\n        });\n\n      }\n\n\n\n    // updateSigninStatus(isSignedIn) {\n    //     var authorizeButton = document.getElementById('authorize_button');\n    //     var signoutButton = document.getElementById('signout_button');\n    //     if (isSignedIn) {\n    //       authorizeButton.style.display = 'none';\n    //       signoutButton.style.display = 'block';\n    //       this.listLabels();\n    //     } else {\n    //       authorizeButton.style.display = 'block';\n    //       signoutButton.style.display = 'none';\n    //     }\n    //   }\n\n\n    /**\n       *  Sign in the user upon button click.\n       */\n      handleAuthClick = async (event) => {\n        let resp = await window.gapi.auth2.getAuthInstance().signIn();\n        this.props.setUserInfo(resp.w3);\n        this.props.updateState(['signedIn', true]);\n      }\n\n      /**\n       *  Sign out the user upon button click.\n       */\n      handleSignoutClick = (event) => {\n        window.gapi.auth2.getAuthInstance().signOut();\n        this.props.updateState(['signedIn', false]);\n      }\n\n      appendPre = (message) => {\n        // var pre = document.getElementById('content');\n        // var textContent = document.createTextNode(message + '\\n');\n        // pre.appendChild(textContent);\n      }\n      \n      \n      listLabels = () => {\n        let that = this;\n        window.gapi.client.gmail.users.labels.list({\n          'userId': 'me'\n        }).then(function(response) {\n          var labels = response.result.labels;\n          that.appendPre('Labels:');\n\n          if (labels && labels.length > 0) {\n            for (let i = 0; i < labels.length; i++) {\n              var label = labels[i];\n              that.appendPre(label.name)\n            }\n          } else {\n            that.appendPre('No Labels found.');\n          }\n        });\n      }\n\n\n    componentDidMount(){\n        window.gapi.load('client:auth2', this.initClient);\n    }\n\n    selectAddress = async (i) => {\n      if(this.props.signedIn) await this.handleAuthClick();\n      \n        this.props.setAddress(this.props.emails[i])\n        this.props.setEmails([]);\n        this.props.history.push('/email');\n    }\n\n    single(obj) {\n      console.log(obj);\n        let forced = {\n            first: \"chris\",\n            last: \"lee\",\n            domain: \"bauerxcel.com\"\n        }\n        fetch(\"http://localhost:4000/single\", { \n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',   \n                'Content-Type': 'application/json'\n              },\n            body: JSON.stringify(obj)\n        }).then(data => {\n            console.log(data);\n            return data.json()})\n        .then(emails => {\n          let name = {...obj};\n          this.props.setEmails(emails);\n          this.props.newRecip(name);\n          this.props.history.push('/find');\n        })\n    }\n\n\n    render(){\n\n        \n        return (\n            <div className=\"App\">\n              <Header handleSignoutClick={this.handleSignoutClick} handleAuthClick={this.handleAuthClick}/>\n              <Switch>\n                <Route path=\"/email\" component={()=>{return <WritingEmail selectAddress={this.selectAddress} single={this.single} selAdd={this.state.selAdd} single={this.single} emails={this.state.emails} selectAddress={this.selectAddress} name={this.state.name} changeName={this.changeName}/> }}/>\n                <Route path=\"/find\" component={() => {return <Address single={this.single} selectAddress={this.selectAddress} selAdd={this.state.selAdd} changeName={this.changeName}/>}}/>\n                <Route path=\"/\" component={() => {return <Home single={this.single} emails={this.state.emails} selectAddress={this.selectAddress} selAdd={this.state.selAdd} changeName={this.changeName}/>}}/>\n              </Switch>\n\n            </div>\n        )\n    }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n  )(withRouter(App));"]},"metadata":{},"sourceType":"module"}