{"ast":null,"code":"import _classCallCheck from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\n\nvar gmailAPI = function gmailAPI(apiKey, clientId) {\n  var _this = this;\n\n  _classCallCheck(this, gmailAPI);\n\n  this.initClient = function () {\n    console.log(window.gapi);\n    window.gapi.client.init({\n      apiKey: _this.API_KEY,\n      clientId: _this.CLIENT_ID,\n      discoveryDocs: _this.DISCOVERY_DOCS,\n      scope: _this.SCOPES\n    }).then(function () {\n      // Listen for sign-in state changes.\n      window.gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus); // Handle the initial sign-in state.\n\n      updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n      authorizeButton.onclick = handleAuthClick;\n      signoutButton.onclick = handleSignoutClick;\n    }, function (error) {\n      appendPre(JSON.stringify(error, null, 2));\n    });\n  };\n\n  this.updateSigninStatus = function (isSignedIn) {\n    if (isSignedIn) {\n      authorizeButton.style.display = 'none';\n      signoutButton.style.display = 'block';\n      listLabels();\n    } else {\n      authorizeButton.style.display = 'block';\n      signoutButton.style.display = 'none';\n    }\n  };\n\n  this.handleAuthClick = function (event) {\n    _this.gapi.auth2.getAuthInstance().signIn();\n  };\n\n  this.handleSignoutClick = function (event) {\n    _this.gapi.auth2.getAuthInstance().signOut();\n  };\n\n  this.appendPre = function (message) {\n    var pre = document.getElementById('content');\n    var textContent = document.createTextNode(message + '\\n');\n    pre.appendChild(textContent);\n  };\n\n  this.listLabels = function () {\n    _this.gapi.client.gmail.users.labels.list({\n      'userId': 'me'\n    }).then(function (response) {\n      var labels = response.result.labels;\n      this.appendPre('Labels:');\n\n      if (labels && labels.length > 0) {\n        for (var i = 0; i < labels.length; i++) {\n          var label = labels[i];\n          this.appendPre(label.name);\n        }\n      } else {\n        this.appendPre('No Labels found.');\n      }\n    });\n  };\n\n  this.CLIENT_ID = clientId;\n  this.API_KEY = apiKey; // Array of API discovery doc URLs for APIs used by the quickstart\n\n  this.DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest\"]; // Authorization scopes required by the API; multiple scopes can be\n  // included, separated by spaces.\n\n  this.SCOPES = 'https://www.googleapis.com/auth/gmail.readonly';\n  this.gapi = window.gapi;\n};\n\nexport default gmailAPI;","map":{"version":3,"sources":["/home/victor/Documents/dadTools/emailFinder/src/google.js"],"names":["gmailAPI","apiKey","clientId","initClient","console","log","window","gapi","client","init","API_KEY","CLIENT_ID","discoveryDocs","DISCOVERY_DOCS","scope","SCOPES","then","auth2","getAuthInstance","isSignedIn","listen","updateSigninStatus","get","authorizeButton","onclick","handleAuthClick","signoutButton","handleSignoutClick","error","appendPre","JSON","stringify","style","display","listLabels","event","signIn","signOut","message","pre","document","getElementById","textContent","createTextNode","appendChild","gmail","users","labels","list","response","result","length","i","label","name"],"mappings":"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","sourcesContent":["class gmailAPI {\n    constructor(apiKey, clientId) {\n        this.CLIENT_ID = clientId;\n        this.API_KEY = apiKey;\n       \n        // Array of API discovery doc URLs for APIs used by the quickstart\n        this.DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest\"];\n       \n        // Authorization scopes required by the API; multiple scopes can be\n        // included, separated by spaces.\n        this.SCOPES = 'https://www.googleapis.com/auth/gmail.readonly';\n        this.gapi =  window.gapi\n\n        \n\n    }\n    initClient = () => {\n\n        console.log(window.gapi)\n        window.gapi.client.init({\n          apiKey: this.API_KEY,\n          clientId: this.CLIENT_ID,\n          discoveryDocs: this.DISCOVERY_DOCS,\n          scope: this.SCOPES\n        }).then(function () {\n          // Listen for sign-in state changes.\n          window.gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);\n\n          // Handle the initial sign-in state.\n          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n          authorizeButton.onclick = handleAuthClick;\n          signoutButton.onclick = handleSignoutClick;\n        }, function(error) {\n          appendPre(JSON.stringify(error, null, 2));\n        });\n      }\n\n      updateSigninStatus = (isSignedIn) => {\n        if (isSignedIn) {\n          authorizeButton.style.display = 'none';\n          signoutButton.style.display = 'block';\n          listLabels();\n        } else {\n          authorizeButton.style.display = 'block';\n          signoutButton.style.display = 'none';\n        }\n      }\n\n\n      /**\n       *  Sign in the user upon button click.\n       */\n      handleAuthClick = (event) => {\n        this.gapi.auth2.getAuthInstance().signIn();\n      }\n\n      /**\n       *  Sign out the user upon button click.\n       */\n      handleSignoutClick = (event) => {\n        this.gapi.auth2.getAuthInstance().signOut();\n      }\n\n      /**\n       * Append a pre element to the body containing the given message\n       * as its text node. Used to display the results of the API call.\n       *\n       * @param {string} message Text to be placed in pre element.\n       */\n      appendPre = (message) => {\n        var pre = document.getElementById('content');\n        var textContent = document.createTextNode(message + '\\n');\n        pre.appendChild(textContent);\n      }\n\n      /**\n       * Print all Labels in the authorized user's inbox. If no labels\n       * are found an appropriate message is printed.\n       */\n      listLabels = () => {\n        this.gapi.client.gmail.users.labels.list({\n          'userId': 'me'\n        }).then(function(response) {\n          var labels = response.result.labels;\n          this.appendPre('Labels:');\n\n          if (labels && labels.length > 0) {\n            for (let i = 0; i < labels.length; i++) {\n              var label = labels[i];\n              this.appendPre(label.name)\n            }\n          } else {\n            this.appendPre('No Labels found.');\n          }\n        });\n      }\n}\n\nexport default gmailAPI;\n\n    "]},"metadata":{},"sourceType":"module"}