{"ast":null,"code":"import _classCallCheck from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/victor/Documents/dadTools/emailFinder/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/victor/Documents/dadTools/emailFinder/src/App.js\";\nimport React from 'react';\nimport Message from './Message';\nimport Address from './Address';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleAuthClick = function (event) {\n      window.gapi.auth2.getAuthInstance().signIn();\n      console.log(window.gapi);\n    };\n\n    _this.handleSignoutClick = function (event) {\n      window.gapi.auth2.getAuthInstance().signOut();\n    };\n\n    _this.appendPre = function (message) {// var pre = document.getElementById('content');\n      // var textContent = document.createTextNode(message + '\\n');\n      // pre.appendChild(textContent);\n    };\n\n    _this.listLabels = function () {\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      window.gapi.client.gmail.users.labels.list({\n        'userId': 'me'\n      }).then(function (response) {\n        var labels = response.result.labels;\n        that.appendPre('Labels:');\n\n        if (labels && labels.length > 0) {\n          for (var i = 0; i < labels.length; i++) {\n            var label = labels[i];\n            that.appendPre(label.name);\n          }\n        } else {\n          that.appendPre('No Labels found.');\n        }\n      });\n    };\n\n    _this.selectAddress = function (selAdd) {\n      _this.setState({\n        selAdd: selAdd\n      }, function () {});\n\n      console.log(_assertThisInitialized(_assertThisInitialized(_this)));\n    };\n\n    _this.state = {\n      selAdd: false,\n      emails: [],\n      CLIENT_ID: '605121789952-64i5u4ggvju6qhlmkrkv71ol78qbk5aa.apps.googleusercontent.com',\n      API_KEY: 'AIzaSyBkrt40jx5wx3PG4S5W9B49Vm02RNh4vt0',\n      DISCOVERY_DOCS: [\"https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest\"],\n      // Authorization scopes required by the API; multiple scopes can be\n      // included, separated by spaces.\n      SCOPES: 'https://www.googleapis.com/auth/gmail.readonly' + ' https://www.googleapis.com/auth/gmail.send'\n    };\n    _this.single = _this.single.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.initClient = _this.initClient.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateSigninStatus = _this.updateSigninStatus.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"initClient\",\n    value: function initClient() {\n      var s = this.state;\n      var that = this;\n      window.gapi.client.init({\n        apiKey: s.API_KEY,\n        clientId: s.CLIENT_ID,\n        discoveryDocs: s.DISCOVERY_DOCS,\n        scope: s.SCOPES\n      }).then(function () {\n        // Listen for sign-in state changes.\n        window.gapi.auth2.getAuthInstance().isSignedIn.listen(that.updateSigninStatus); // Handle the initial sign-in state.\n\n        that.updateSigninStatus(window.gapi.auth2.getAuthInstance().isSignedIn.get());\n      }, function (error) {\n        console.log(error);\n        this.appendPre(JSON.stringify(error, null, 2));\n      });\n    }\n  }, {\n    key: \"updateSigninStatus\",\n    value: function updateSigninStatus(isSignedIn) {\n      var authorizeButton = document.getElementById('authorize_button');\n      var signoutButton = document.getElementById('signout_button');\n\n      if (isSignedIn) {\n        authorizeButton.style.display = 'none';\n        signoutButton.style.display = 'block';\n        this.listLabels();\n      } else {\n        authorizeButton.style.display = 'block';\n        signoutButton.style.display = 'none';\n      }\n    }\n    /**\n       *  Sign in the user upon button click.\n       */\n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //const gmail = new gmailAPI(this.state.API_KEY, this.state.CLIENT_ID);\n      window.gapi.load('client:auth2', this.initClient); // gapi = window.gapi\n    }\n  }, {\n    key: \"single\",\n    value: function single(obj) {\n      var _this2 = this;\n\n      console.log(window.gapi);\n      fetch(\"http://localhost:4000/single\", {\n        method: \"POST\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(obj)\n      }).then(function (data) {\n        console.log(data);\n        return data.json();\n      }).then(function (emails) {\n        _this2.setState({\n          emails: emails\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        id: \"authorize_button\",\n        onClick: this.handleAuthClick,\n        style: {\n          display: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Authorize\"), React.createElement(\"button\", {\n        id: \"signout_button\",\n        onClick: this.handleSignoutClick,\n        style: {\n          display: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Sign Out\"), React.createElement(Address, {\n        single: this.single,\n        emails: this.state.emails,\n        selectAddress: this.selectAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), React.createElement(Message, {\n        selAdd: this.state.selAdd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/home/victor/Documents/dadTools/emailFinder/src/App.js"],"names":["React","Message","Address","App","props","handleAuthClick","event","window","gapi","auth2","getAuthInstance","signIn","console","log","handleSignoutClick","signOut","appendPre","message","listLabels","that","client","gmail","users","labels","list","then","response","result","length","i","label","name","selectAddress","selAdd","setState","state","emails","CLIENT_ID","API_KEY","DISCOVERY_DOCS","SCOPES","single","bind","initClient","updateSigninStatus","s","init","apiKey","clientId","discoveryDocs","scope","isSignedIn","listen","get","error","JSON","stringify","authorizeButton","document","getElementById","signoutButton","style","display","load","obj","fetch","method","headers","body","data","json","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Message from './Message';\nimport Address from './Address';\n\n\nclass App extends React.Component {\n    constructor(props){\n        super(props);\n\n        this.state = {\n            selAdd: false,\n            emails: [],\n            CLIENT_ID: '605121789952-64i5u4ggvju6qhlmkrkv71ol78qbk5aa.apps.googleusercontent.com',\n            API_KEY: 'AIzaSyBkrt40jx5wx3PG4S5W9B49Vm02RNh4vt0',\n            DISCOVERY_DOCS: [\"https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest\"],\n       \n            // Authorization scopes required by the API; multiple scopes can be\n            // included, separated by spaces.\n            SCOPES: 'https://www.googleapis.com/auth/gmail.readonly'+' https://www.googleapis.com/auth/gmail.send'\n\n        }\n        this.single = this.single.bind(this);\n\n\n        this.initClient = this.initClient.bind(this);\n        this.updateSigninStatus = this.updateSigninStatus.bind(this);\n\n\n    }\n\n\n    initClient() {\n        const s = this.state;\n        let that = this;\n        window.gapi.client.init({\n          apiKey: s.API_KEY,\n          clientId: s.CLIENT_ID,\n          discoveryDocs: s.DISCOVERY_DOCS,\n          scope: s.SCOPES\n        }).then(function () {\n          // Listen for sign-in state changes.\n          window.gapi.auth2.getAuthInstance().isSignedIn.listen(that.updateSigninStatus);\n\n          // Handle the initial sign-in state.\n          that.updateSigninStatus(window.gapi.auth2.getAuthInstance().isSignedIn.get());\n         \n        }, function(error) {\n            console.log(error);\n            this.appendPre(JSON.stringify(error, null, 2));\n        });\n      }\n\n\n\n    updateSigninStatus(isSignedIn) {\n        var authorizeButton = document.getElementById('authorize_button');\n        var signoutButton = document.getElementById('signout_button');\n        if (isSignedIn) {\n          authorizeButton.style.display = 'none';\n          signoutButton.style.display = 'block';\n          this.listLabels();\n        } else {\n          authorizeButton.style.display = 'block';\n          signoutButton.style.display = 'none';\n        }\n      }\n\n\n    /**\n       *  Sign in the user upon button click.\n       */\n      handleAuthClick = (event) => {\n        window.gapi.auth2.getAuthInstance().signIn();\n        console.log(window.gapi);\n      }\n\n      /**\n       *  Sign out the user upon button click.\n       */\n      handleSignoutClick = (event) => {\n        window.gapi.auth2.getAuthInstance().signOut();\n      }\n\n      appendPre = (message) => {\n        // var pre = document.getElementById('content');\n        // var textContent = document.createTextNode(message + '\\n');\n        // pre.appendChild(textContent);\n      }\n      \n      \n      listLabels = () => {\n        let that = this;\n        window.gapi.client.gmail.users.labels.list({\n          'userId': 'me'\n        }).then(function(response) {\n          var labels = response.result.labels;\n          that.appendPre('Labels:');\n\n          if (labels && labels.length > 0) {\n            for (let i = 0; i < labels.length; i++) {\n              var label = labels[i];\n              that.appendPre(label.name)\n            }\n          } else {\n            that.appendPre('No Labels found.');\n          }\n        });\n      }\n\n\n    componentDidMount(){\n        //const gmail = new gmailAPI(this.state.API_KEY, this.state.CLIENT_ID);\n        window.gapi.load('client:auth2', this.initClient);\n        // gapi = window.gapi\n\n    }\n\n    selectAddress = (selAdd) => {\n        this.setState( { selAdd }, function(){} )\n        console.log(this)\n    }\n\n    single(obj) {\n        console.log(window.gapi)\n        fetch(\"http://localhost:4000/single\", { \n            method: \"POST\",\n            headers: {\n                'Accept': 'application/json',   \n                'Content-Type': 'application/json'\n              },\n            body: JSON.stringify(obj)\n        }).then(data => {\n            console.log(data);\n            return data.json()})\n        .then(emails => {\n            this.setState( { emails } )\n        })\n    \n    }\n\n\n    render(){\n\n        \n        return (\n            <div className=\"App\">\n\n                <button id=\"authorize_button\" onClick={this.handleAuthClick} style={{display: 'none'}}>Authorize</button>\n                <button id=\"signout_button\" onClick={this.handleSignoutClick} style={{display: 'none'}}>Sign Out</button>\n                <Address single={this.single} emails={this.state.emails} selectAddress={this.selectAddress}/>\n\n                <Message  selAdd={this.state.selAdd}/>\n\n                <div id=\"content\"/>\n\n                {/* <button id=\"upload\" onclick={this.upload}>upload</button>\n                <button id=\"test\" onclick={this.test}>test</button> */}\n            </div>\n        )\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}